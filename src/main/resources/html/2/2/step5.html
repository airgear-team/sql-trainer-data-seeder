<div class="container">

    <h2>Запити до кількох таблиць з групуванням</h2>

    <p>
        У запитах з груповими функціями можуть використовуватись кілька таблиць, між якими застосовуються різні типи
        з'єднань.
    </p>

    <h3>Приклад</h3>

    <p>Вивести кількість різних книг кожного автора. Інформацію відсортувати в алфавітному порядку за прізвищами
        авторів.</p>

    <p class="skewed">Запит:</p>
    <pre class="sqlResultTable">SELECT name_author, count(title) AS Кількість
FROM 
    author INNER JOIN book
    ON author.author_id = book.author_id
GROUP BY name_author
ORDER BY name_author;    
</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">+------------------+------------+
| name_author      | Кількість  |
+------------------+------------+
| Булгаков М.А.    | 2          |
| Достоєвський Ф.М.| 3          |
| Єсенін С.А.      | 2          |
| Пастернак Б.Л.   | 1          |
+------------------+------------+
</pre>

    <p>
        При використанні з'єднання <code>INNER JOIN</code> ми не можемо дізнатися, що книг Лермонтова на складі немає,
        хоча передбачається, що вони можуть бути. Щоб автор Лермонтов був включений у результат, потрібно змінити тип
        з'єднання таблиць.
    </p>

    <p class="skewed">Запит:</p>
    <pre class="sqlResultTable">SELECT name_author, count(title) AS Кількість
FROM 
    author LEFT JOIN book
    ON author.author_id = book.author_id
GROUP BY name_author
ORDER BY name_author;    
</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">+------------------+------------+
| name_author      | Кількість  |
+------------------+------------+
| Булгаков М.А.    | 2          |
| Достоєвський Ф.М.| 3          |
| Єсенін С.А.      | 2          |
| Лермонтов М.Ю.   | 0          |
| Пастернак Б.Л.   | 1          |
+------------------+------------+
</pre>

    <h3>Завдання</h3>
    <p>
        Порахувати кількість примірників книг кожного автора з таблиці <code>author</code>. Вивести тих авторів,
        кількість книг яких менша за 10, у відсортованому за зростанням кількості вигляді. Останній стовпець назвати
        <code>Кількість</code>.
    </p>


    <div id="toggle0" style="cursor: pointer;">
        <div><span class="arrow-text"><strong>Пояснення</strong></span></div>
    </div>
    <div id="hiddenText0" style="display:none;">
        <p>
            Щоб у результат були включені автори, книг яких на складі немає, необхідно в умові відбору, крім того, що
            загальна кількість книг кожного автора менша за 10, врахувати, що у автора взагалі може не бути книг (тобто
            <code>COUNT(title) = 0</code>).
        </p>

    </div>

    <h3>Текст завдання (щоб не прокручувати сторінку):</h3>
    <p class="gray-quote">
        Порахувати кількість примірників книг кожного автора з таблиці <code>author</code>. Вивести тих авторів,
        кількість книг яких менша за 10, у відсортованому за зростанням кількості вигляді. Останній стовпець назвати
        <strong>Кількість</strong>.
    </p>

    <p>
        <strong>Логічна схема бази даних:</strong>
    </p>

    <div data-img-id="2.2.5.1"></div>

    <br>

    <div id="toggle1" style="cursor: pointer;">
        <div><span class="arrow-text"><strong>Результат</strong></span></div>
    </div>
    <div id="hiddenText1" style="display:none;">
        <pre class="sqlResultTable">+------------------+------------+
| name_author      | Кількість  |
+------------------+------------+
| Лермонтов М.Ю.   | NULL       |
| Пастернак Б.Л.   | 2          |
| Булгаков М.А.    | 8          |
+------------------+------------+</pre>
    </div>

    <p></p>

    <div id="toggle2" style="cursor: pointer;">
        <div><span class="arrow-text"><strong>Структура та наповнення таблиць</strong></span></div>
    </div>
    <div id="hiddenText2" style="display:none;">
        <pre class="sqlResultTable">Таблиця genre:
+----------+-------------+
| genre_id | name_genre  |
+----------+-------------+
| 1        | Роман       |
| 2        | Поезія      |
| 3        | Пригоди     |
+----------+-------------+

Таблиця author:
+-----------+------------------+
| author_id | name_author      |
+-----------+------------------+
| 1         | Булгаков М.А.    |
| 2         | Достоєвський Ф.М.|
| 3         | Єсенін С.А.      |
| 4         | Пастернак Б.Л.   |
| 5         | Лермонтов М.Ю.   |
+-----------+------------------+

Таблиця book:
+---------+-----------------------+-----------+----------+--------+--------+
| book_id | title                 | author_id | genre_id | price  | amount |
+---------+-----------------------+-----------+----------+--------+--------+
| 1       | Майстер і Маргарита   | 1         | 1        | 670.99 | 3      |
| 2       | Біла гвардія          | 1         | 1        | 540.50 | 5      |
| 3       | Ідіот                 | 2         | 1        | 460.00 | 10     |
| 4       | Брати Карамазови      | 2         | 1        | 799.01 | 3      |
| 5       | Гравець               | 2         | 1        | 480.50 | 10     |
| 6       | Вірші та поеми        | 3         | 2        | 650.00 | 15     |
| 7       | Чорна людина          | 3         | 2        | 570.20 | 6      |
| 8       | Лірика                | 4         | 2        | 518.99 | 2      |
+---------+-----------------------+-----------+----------+--------+--------+</pre>
    </div>
</div>