<div class="container">

    <h2>Запити на оновлення, вкладені запити</h2>

    <p>
        Після того, як нові книги додані до таблиці <code>book</code>, потрібно вказати, до якого жанру вони належать.
        Для цього використовується запит на оновлення, у якому можна вказати значення стовпців з інших таблиць або
        використати
        вкладені запити для отримання цих значень.
    </p>

    <h3>Приклад</h3>

    <p>
        Задати для книги Пастернака «Доктор Живаго» жанр «Роман».
    </p>

    <p>
        Якщо відомий код цієї книги в таблиці <code>book</code> (у нашому випадку це 9) і код жанру «Роман» у таблиці
        <code>genre</code> (це 1),
        запит буде дуже простим.
    </p>

    <p class="skewed">Запит:</p>
    <pre class="sqlResultTable">UPDATE book
SET genre_id = 1
WHERE book_id = 9;

SELECT * FROM book;
</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">Affected rows: 1

Query result:
+---------+-----------------------+-----------+----------+--------+--------+
| book_id | title                 | author_id | genre_id | price  | amount |
+---------+-----------------------+-----------+----------+--------+--------+
| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |
| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |
| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |
| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |
| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |
| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |
| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |
| 8       | Лирика                | 4         | 2        | 518.99 | 2      |
| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |
| 10      | Стихотворения и поэмы | 5         | NULL     | 255.90 | 4      |
| 11      | Остров сокровищ       | 6         | NULL     | 599.99 | 5      |
+---------+-----------------------+-----------+----------+--------+--------+
</pre>

    <p>
        Більш складним буде запит, якщо відома лише назва жанру (результат буде таким самим):
    </p>

    <p class="skewed">Запит:</p>
    <pre class="sqlResultTable">UPDATE book
SET genre_id = 
      (
       SELECT genre_id 
       FROM genre 
       WHERE name_genre = 'Роман'
      )
WHERE book_id = 9;

SELECT * FROM book;
</pre>

    <h3>Завдання</h3>
    <p>
        Встановити для книги «Стихотворения и поэмы» Лермонтова жанр «Поезія», а для книги «Остров сокровищ» Стівенсона
        — «Пригоди». (Використати два запити).
    </p>

    <div id="toggle1" style="cursor: pointer;">
        <div><span class="arrow-text"><strong>Результат</strong></span></div>
    </div>
    <div id="hiddenText1" style="display:none;">
        <pre class="sqlResultTable">Affected rows: 2

Query result:
+---------+-----------------------+-----------+----------+--------+--------+
| book_id | title                 | author_id | genre_id | price  | amount |
+---------+-----------------------+-----------+----------+--------+--------+
| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |
| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |
| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |
| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |
| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |
| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |
| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |
| 8       | Лирика                | 4         | 2        | 518.99 | 2      |
| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |
| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |
| 11      | Остров сокровищ       | 6         | 3        | 599.99 | 5      |
+---------+-----------------------+-----------+----------+--------+--------+
</pre>
    </div>

    <p></p>

    <div id="toggle2" style="cursor: pointer;">
        <div><span class="arrow-text"><strong>Структура</strong></span></div>
    </div>
    <div id="hiddenText2" style="display:none;">
        <pre class="sqlResultTable">Таблиця book:
+---------+-----------------------+-----------+----------+--------+--------+
| book_id | title                 | author_id | genre_id | price  | amount |
+---------+-----------------------+-----------+----------+--------+--------+
| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |
| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |
| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |
| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |
| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |
| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |
| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |
| 8       | Лирика                | 4         | 2        | 518.99 | 2      |
+---------+-----------------------+-----------+----------+--------+--------+

Таблиця author:                       Таблиця genre:
+-----------+------------------+       +----------+-------------+
| author_id | name_author      |       | genre_id | name_genre  |
+-----------+------------------+       +----------+-------------+
| 1         | Булгаков М.А.    |       | 1        | Роман       |
| 2         | Достоєвський Ф.М.|       | 2        | Поезія      |
| 3         | Єсенін С.А.      |       | 3        | Пригоди     |
| 4         | Пастернак Б.Л.   |       +----------+-------------+
| 5         | Лермонтов М.Ю.   |
| 6         | Стівенсон Р.Л.   |
+-----------+------------------+
</pre>
    </div>

</div>