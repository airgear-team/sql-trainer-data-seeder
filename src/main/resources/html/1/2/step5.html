<div class="container">
  <h2>Обчислювані стовпці та математичні функції</h2>

  <p>У SQL реалізовано безліч математичних функцій для роботи з числовими даними. У таблиці нижче наведено деякі з них:
  </p>


  <div class="tableWrapper">

    <table class="infoTable">
      <thead>
        <tr>
          <th>Функція</th>
          <th>Опис</th>
          <th>Приклад</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code class="code-inline">CEILING(x)</code></td>
          <td>повертає найменше ціле число, більше або рівне <code>x</code></td>
          <td><code>CEILING(4.2) = 5</code><br><code>CEILING(-5.8) = -5</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">ROUND(x, k)</code></td>
          <td>
            округлює <code>x</code> до <code>k</code> знаків після коми<br>(якщо не вказано – до цілого)
          </td>
          <td><code>ROUND(4.361) = 4</code><br><code>ROUND(5.86592, 1) = 5.9</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">FLOOR(x)</code></td>
          <td>повертає найбільше ціле число, менше або рівне <code>x</code></td>
          <td><code>FLOOR(4.2) = 4</code><br><code>FLOOR(-5.8) = -6</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">POWER(x, y)</code></td>
          <td>підносить <code>x</code> до степеня <code>y</code></td>
          <td><code>POWER(3, 4) = 81.0</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">SQRT(x)</code></td>
          <td>квадратний корінь з <code>x</code></td>
          <td><code>SQRT(4) = 2.0</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">DEGREES(x)</code></td>
          <td>переводить <code>x</code> з радіан у градуси</td>
          <td><code>DEGREES(3) = 171.8</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">RADIANS(x)</code></td>
          <td>переводить <code>x</code> з градусів у радіани</td>
          <td><code>RADIANS(180) = 3.14</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">ABS(x)</code></td>
          <td>модуль числа <code>x</code></td>
          <td><code>ABS(-1) = 1</code></td>
        </tr>
        <tr>
          <td><code class="code-inline">PI()</code></td>
          <td>повертає число <code>π</code> (пі)</td>
          <td><code>PI() = 3.1415926</code></td>
        </tr>
      </tbody>
    </table>

  </div>

  <p><strong>Пояснення: </strong>Існують різні способи округлення чисел. У SQL реалізовано <strong>математичне
      округлення</strong>. Для
    округлення
    дійсного числа потрібно у записі числа вибрати розряд у дробовій частині, до якого здійснюється округлення. Цифра,
    записана у вибраному розряді: не змінюється, якщо наступна справа цифра — 0, 1, 2, 3 або 4; збільшується на одиницю,
    якщо наступна справа цифра — 5, 6, 7, 8 або 9.</p>

  <p><strong>Приклад</strong></p>

  <p>Для кожної книги з таблиці <code>book</code> обчислимо податок на додану вартість (назва стовпця <code>tax</code>),
    який включено у ціну і
    становить k = 18%, а також ціну книги (<code>price_tax</code>) без нього. Формули для обчислення:</p>


  <div data-img-id="1.2.5.1"></div>

  <p>Значення ПДВ у 18% взято для ПРИКЛАДУ, щоб показати, як використовувати функції округлення.</p>

  <p>Ця формула ПДВ відповідає на питання «Яку суму збільшили на 18%, щоб отримати поточне значення».</p>
  <p class="skewed">Запит:</p>

  <pre class="sqlCodeBlock">SELECT title, price,
       (price*18/100)/(1+18/100) AS tax,
       price/(1+18/100) AS price_tax
FROM books;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+--------------------------+--------+----------------+------------+
| title                    | price  | tax            | price_tax  |
+--------------------------+--------+----------------+------------+
| Кайдашева сімʼя          | 320.50 | 48.8898305085  | 271.610169 |
| Тіні забутих предків     | 410.00 | 62.4576271186  | 347.542373 |
| Кобзар                   | 520.00 | 79.3220338983  | 440.677966 |
| Маруся                   | 300.00 | 45.7627118644  | 254.237288 |
| Лісова пісня             | 450.00 | 68.6440677966  | 381.355932 |
+--------------------------+--------+----------------+------------+</pre>

  <p>Сума податку і ціна книги без податку — це гроші, тому кількість знаків після коми у цих числах має бути 2.
    Отже, необхідно округлити отримані значення.</p>

  <p><strong>Запит:</strong></p>
  <pre class="sqlCodeBlock">SELECT title,
       price,
       ROUND((price*18/100)/(1+18/100), 2) AS tax,
       ROUND(price/(1+18/100), 2) AS price_tax
FROM books;</pre>

  <p><strong>Результат:</strong></p>
  <pre class="sqlResultTable">+--------------------------+--------+--------+-----------+
| title                    | price  | tax    | price_tax |
+--------------------------+--------+--------+-----------+
| Кайдашева сімʼя          | 320.50 | 48.89  | 271.61    |
| Тіні забутих предків     | 410.00 | 62.46  | 347.54    |
| Кобзар                   | 520.00 | 79.32  | 440.68    |
| Маруся                   | 300.00 | 45.76  | 254.24    |
| Лісова пісня             | 450.00 | 68.64  | 381.36    |
+--------------------------+--------+--------+-----------+</pre>

  <h2>Завдання</h2>
  <p>Наприкінці року ціну кожної книги на складі перераховують — знижують її на 30%.
    Напишіть SQL-запит, який з таблиці <code>books</code> вибирає назви, авторів, кількість і обчислює нові ціни книг.
    Стовпець з новою ціною назвати <code>new_price</code>, ціну округлити до 2 знаків після коми.
  </p>

  <p><strong>Результат:</strong></p>
  <pre class="sqlResultTable">+--------------------------+-----------------------------+--------+-----------+
| title                    | author                      | amount | new_price |
+--------------------------+-----------------------------+--------+-----------+
| Кайдашева сімʼя          | Нечуй-Левицький І.С.        | 3      | 224.35    |
| Тіні забутих предків     | Коцюбинський М.М.           | 5      | 287.00    |
| Кобзар                   | Шевченко Т.Г.              | 10     | 364.00    |
| Маруся                   | Квітка-Основʼяненко Г.Ф.    | 2      | 210.00    |
| Лісова пісня             | Леся Українка              | 7      | 315.00    |
+--------------------------+-----------------------------+--------+-----------+</pre>

  <div id="toggle">
    <div>
      <span class="arrow-text"><strong>Структура та вміст таблиці</strong> <code>books</code></span>
    </div>
  </div>
  <div id="hiddenText">
<pre class="sqlResultTable">+---------+--------------------------+-----------------------------+--------+--------+
| book_id | title                    | author                      | price  | amount |
+---------+--------------------------+-----------------------------+--------+--------+
| 1       | Кайдашева сімʼя          | Нечуй-Левицький І.С.        | 320.50 | 3      |
| 2       | Тіні забутих предків     | Коцюбинський М.М.           | 410.00 | 5      |
| 3       | Кобзар                   | Шевченко Т.Г.              | 520.00 | 10     |
| 4       | Маруся                   | Квітка-Основʼяненко Г.Ф.    | 300.00 | 2      |
| 5       | Лісова пісня             | Леся Українка              | 450.00 | 7      |
+---------+--------------------------+-----------------------------+--------+--------+</pre>
  </div>

</div>