<div class="container">
  <h2>Обчислювані стовпці та математичні функції</h2>

  <p>У SQL реалізовано безліч математичних функцій для роботи з числовими даними. У таблиці нижче наведено деякі з них:
  </p>

  <div class="tableWrapper">

    <table class="infoTable">
      <thead>
      <tr>
        <th>Функція</th>
        <th>Опис</th>
        <th>Приклад</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td><code class="code-inline">CEILING(x)</code></td>
        <td>повертає найменше ціле число, більше або рівне <code>x</code></td>
        <td><code>CEILING(4.2) = 5</code><br><code>CEILING(-5.8) = -5</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">ROUND(x, k)</code></td>
        <td>
          округлює <code>x</code> до <code>k</code> знаків після коми<br>(якщо не вказано – до цілого)
        </td>
        <td><code>ROUND(4.361) = 4</code><br><code>ROUND(5.86592, 1) = 5.9</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">FLOOR(x)</code></td>
        <td>повертає найбільше ціле число, менше або рівне <code>x</code></td>
        <td><code>FLOOR(4.2) = 4</code><br><code>FLOOR(-5.8) = -6</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">POWER(x, y)</code></td>
        <td>підносить <code>x</code> до степеня <code>y</code></td>
        <td><code>POWER(3, 4) = 81.0</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">SQRT(x)</code></td>
        <td>квадратний корінь з <code>x</code></td>
        <td><code>SQRT(4) = 2.0</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">DEGREES(x)</code></td>
        <td>переводить <code>x</code> з радіан у градуси</td>
        <td><code>DEGREES(3) = 171.8</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">RADIANS(x)</code></td>
        <td>переводить <code>x</code> з градусів у радіани</td>
        <td><code>RADIANS(180) = 3.14</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">ABS(x)</code></td>
        <td>модуль числа <code>x</code></td>
        <td><code>ABS(-1) = 1</code></td>
      </tr>
      <tr>
        <td><code class="code-inline">PI()</code></td>
        <td>повертає число <code>π</code> (пі)</td>
        <td><code>PI() = 3.1415926</code></td>
      </tr>
      </tbody>
    </table>

  </div>

  <p><strong>Пояснення: </strong>Існують різні способи округлення чисел. У SQL реалізовано <strong>математичне
    округлення</strong>. Для
    округлення дійсного числа потрібно у записі числа вибрати розряд у дробовій частині, до якого здійснюється округлення.
    Цифра, записана у вибраному розряді: не змінюється, якщо наступна справа цифра — 0, 1, 2, 3 або 4; збільшується на одиницю,
    якщо наступна справа цифра — 5, 6, 7, 8 або 9.</p>

  <p><strong>Приклад</strong></p>

  <p>Для кожної книги з таблиці <code>book</code> обчислимо податок на додану вартість (назва стовпця <code>tax</code>),
    який включено у ціну і становить k = 18%, а також ціну книги (<code>price_tax</code>) без нього. Формули для обчислення:</p>

  <div data-img-id="1.2.5.1"></div>

  <p>Значення ПДВ у 18% взято для ПРИКЛАДУ, щоб показати, як використовувати функції округлення.</p>

  <p>Ця формула ПДВ відповідає на питання «Яку суму збільшили на 18%, щоб отримати поточне значення».</p>
  <p class="skewed">Запит:</p>

  <pre class="sqlCodeBlock">SELECT title, price,
       (price*18/100)/(1+18/100) AS tax,
       price/(1+18/100) AS price_tax
FROM book;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+----------------------+--------+----------------+------------+
| title                | price  | tax            | price_tax  |
+----------------------+--------+----------------+------------+
| Тіні забутих предків | 670.99 | 102.3544067797 | 568.635593 |
| Intermezzo           | 540.5  | 82.4491525424  | 458.050847 |
| Кайдашева сім’я      | 460    | 70.1694915254  | 389.830508 |
| Хмари                | 799.01 | 121.8828813559 | 677.127119 |
| Земля                | 650    | 99.1525423729  | 550.847458 |
+----------------------+--------+----------------+------------+</pre>

  <p>Сума податку і ціна книги без податку — це гроші, тому кількість знаків після коми у цих числах має бути 2.
    Отже, необхідно округлити отримані значення.</p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">SELECT title,
       price,
       ROUND((price*18/100)/(1+18/100), 2) AS tax,
       ROUND(price/(1+18/100), 2) AS price_tax
FROM book;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+----------------------+--------+--------+-----------+
| title                | price  | tax    | price_tax |
+----------------------+--------+--------+-----------+
| Тіні забутих предків | 670.99 | 102.35 | 568.64    |
| Intermezzo           | 540.5  | 82.45  | 458.05    |
| Кайдашева сім’я      | 460    | 70.17  | 389.83    |
| Хмари                | 799.01 | 121.88 | 677.13    |
| Земля                | 650    | 99.15  | 550.85    |
+----------------------+--------+--------+-----------+</pre>

  <h2>Завдання</h2>
  <p>Наприкінці року ціну кожної книги на складі перераховують — знижують її на 30%.
    Напишіть SQL-запит, який з таблиці <code>book</code> вибирає назви, авторів, кількість і обчислює нові ціни книг.
    Стовпець з новою ціною назвати <code>new_price</code>, ціну округлити до 2 знаків після коми.
  </p>

  <p><strong>Результат:</strong></p>
  <pre class="sqlResultTable">+----------------------+----------------------+--------+-----------+
| title                | author               | amount | new_price |
+----------------------+----------------------+--------+-----------+
| Тіні забутих предків | Коцюбинський М.М.    | 3      | 469.69    |
| Intermezzo           | Коцюбинський М.М.    | 5      | 378.35    |
| Кайдашева сім’я      | Нечуй-Левицький І.С. | 10     | 322       |
| Хмари                | Нечуй-Левицький І.С. | 2      | 559.31    |
| Земля                | Кобилянська О.Ю.     | 15     | 455       |
+----------------------+----------------------+--------+-----------+</pre>

  <div id="toggle">
    <div>
      <span class="arrow-text"><strong>Структура та вміст таблиці</strong> <code>book</code></span>
    </div>
  </div>
  <div id="hiddenText">
<pre class="sqlResultTable">+---------+----------------------+----------------------+--------+--------+
| book_id | title                | author               | amount | price  |
+---------+----------------------+----------------------+--------+--------+
| 1       | Тіні забутих предків | Коцюбинський М.М.    | 3      | 670.99 |
| 2       | Intermezzo           | Коцюбинський М.М.    | 5      | 540.5  |
| 3       | Кайдашева сім’я      | Нечуй-Левицький І.С. | 10     | 460    |
| 4       | Хмари                | Нечуй-Левицький І.С. | 2      | 799.01 |
| 5       | Земля                | Кобилянська О.Ю.     | 15     | 650    |
+---------+----------------------+----------------------+--------+--------+</pre>
  </div>
</div>