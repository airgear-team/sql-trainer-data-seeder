<div class="container">
  <h2>Вибірка даних з обчислюваними стовпцями та логічними функціями</h2>

  <p>В SQL реалізована можливість задавати значення поля залежно від умови за допомогою функції <code>IF()</code>:</p>

  <pre class="sqlCodeBlock">IF(логічний_вираз, вираз_1, вираз_2)</pre>

  <p>Функція оцінює <code>логічний_вираз</code>, якщо він істинний – повертається значення <code>виразу_1</code>, інакше – значення <code>виразу_2</code>.
    Всі три параметри обов’язкові.</p>

  <p>Можна використовувати вкладені функції, тобто замість <code>виразу_1</code> або <code>виразу_2</code> може стояти новий виклик <code>IF()</code>.</p>

  <p><strong>Приклад</strong></p>

  <p>Для кожної книги встановимо знижку: якщо кількість книг менша за 4, знижка 50% від ціни, інакше 30%.</p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">SELECT title, amount, price,
       IF(amount &lt; 4, price * 0.5, price * 0.7) AS sale
FROM book;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+----------------------+--------+--------+---------+
| title                | amount | price  | sale    |
+----------------------+--------+--------+---------+
| Тіні забутих предків | 3      | 670.99 | 335.495 |
| Intermezzo           | 5      | 540.5  | 378.35  |
| Кайдашева сім’я      | 10     | 460    | 322     |
| Хмари                | 2      | 799.01 | 399.505 |
| Земля                | 15     | 650    | 455     |
+----------------------+--------+--------+---------+</pre>

  <p>Щоб значення відображались з двома знаками після коми, додамо округлення:</p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">SELECT title, amount, price,
       ROUND(IF(amount &lt; 4, price * 0.5, price * 0.7), 2) AS sale
FROM book;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+----------------------+--------+--------+--------+
| title                | amount | price  | sale   |
+----------------------+--------+--------+--------+
| Тіні забутих предків | 3      | 670.99 | 335.5  |
| Intermezzo           | 5      | 540.5  | 378.35 |
| Кайдашева сім’я      | 10     | 460    | 322    |
| Хмари                | 2      | 799.01 | 399.51 |
| Земля                | 15     | 650    | 455    |
+----------------------+--------+--------+--------+</pre>

  <p><strong>Приклад</strong></p>

  <p>Ускладнімо обчислення знижки залежно від кількості книг. Якщо кількість книг менша за 4 — знижка становить 50%.
    Для інших книг, кількість яких менша за 11 — знижка 30%.
    Для всіх решти — знижка 10%. Також вкажемо, яка саме знижка застосовується до кожної книги.</p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">SELECT title, amount, price,
       ROUND(
         IF(amount &lt; 4, price * 0.5,
           IF(amount &lt; 11, price * 0.7, price * 0.9)
         ), 2) AS sale,
       IF(amount &lt; 4, 'знижка 50%',
         IF(amount &lt; 11, 'знижка 30%', 'знижка 10%')
       ) AS Ваша_знижка
FROM book;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+----------------------+--------+--------+--------+-------------+
| title                | amount | price  | sale   | ваша_знижка |
+----------------------+--------+--------+--------+-------------+
| Тіні забутих предків | 3      | 670.99 | 335.5  | знижка 50%  |
| Intermezzo           | 5      | 540.5  | 378.35 | знижка 30%  |
| Кайдашева сім’я      | 10     | 460    | 322    | знижка 30%  |
| Хмари                | 2      | 799.01 | 399.51 | знижка 50%  |
| Земля                | 15     | 650    | 585    | знижка 10%  |
+----------------------+--------+--------+--------+-------------+</pre>

  <h3>Завдання</h3>

  <p>При аналізі продажів з’ясувалося, що найбільшим попитом користуються книги Михайла Коцюбинського, а на другому місці – книги Нечуя-Левицького.
    Тому було прийнято рішення підняти ціну книг Коцюбинського на 10%, а книг Нечуя-Левицького – на 5%.
    Напишіть запит, який виведе автора, назву книги та нову ціну (стовпець назвати <code>new_price</code>). Значення нової ціни округлити до двох знаків після коми.</p>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+----------------------+----------------------+-----------+
| author               | title                | new_price |
+----------------------+----------------------+-----------+
| Коцюбинський М.М.    | Тіні забутих предків | 738.09    |
| Коцюбинський М.М.    | Intermezzo           | 594.55    |
| Нечуй-Левицький І.С. | Кайдашева сім’я      | 483       |
| Нечуй-Левицький І.С. | Хмари                | 838.96    |
| Кобилянська О.Ю.     | Земля                | 650       |
+----------------------+----------------------+-----------+</pre>

  <div id="toggle">
    <div>
      <span class="arrow-text"><strong>Структура та вміст таблиці</strong> <code>book</code></span>
    </div>
  </div>
  <div id="hiddenText">
    <pre class="sqlResultTable">+---------+----------------------+----------------------+--------+--------+
| book_id | title                | author               | amount | price  |
+---------+----------------------+----------------------+--------+--------+
| 1       | Тіні забутих предків | Коцюбинський М.М.    | 3      | 670.99 |
| 2       | Intermezzo           | Коцюбинський М.М.    | 5      | 540.5  |
| 3       | Кайдашева сім’я      | Нечуй-Левицький І.С. | 10     | 460    |
| 4       | Хмари                | Нечуй-Левицький І.С. | 2      | 799.01 |
| 5       | Земля                | Кобилянська О.Ю.     | 15     | 650    |
+---------+----------------------+----------------------+--------+--------+</pre>
  </div>
</div>
