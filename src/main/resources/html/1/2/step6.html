<div class="container">
  <h2>Вибірка даних з обчислюваними стовпцями та логічними функціями</h2>

  <p>В SQL реалізована можливість задавати значення поля залежно від умови за допомогою функції <code>IF()</code>:</p>

  <pre class="sqlCodeBlock">IF(логічний_вираз, вираз_1, вираз_2)</pre>

  <p>Функція оцінює <code>логічний_вираз</code>, якщо він істинний – повертається значення <code>виразу_1</code>, інакше – значення <code>виразу_2</code>.
    Всі три параметри обов’язкові.</p>

  <p>Можна використовувати вкладені функції, тобто замість <code>виразу_1</code> або <code>виразу_2</code> може стояти новий виклик <code>IF()</code>.</p>

  <p><strong>Приклад</strong></p>

  <p>Для кожної книги встановимо знижку: якщо кількість книг менша за 4, знижка 50% від ціни, інакше 30%.</p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">SELECT title, amount, price,
       IF(amount &lt; 4, price * 0.5, price * 0.7) AS sale
FROM books;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+-----------------------+--------+--------+--------+
| title                 | amount | price  | sale   |
+-----------------------+--------+--------+--------+
| Кайдашева сімʼя       | 3      | 320.50 | 160.25 |
| Тіні забутих предків  | 5      | 410.00 | 287.00 |
| Кобзар                | 10     | 520.00 | 364.00 |
| Маруся                | 2      | 300.00 | 150.00 |
| Лісова пісня          | 7      | 450.00 | 315.00 |
+-----------------------+--------+--------+--------+</pre>

  <p>Щоб значення відображались з двома знаками після коми, додамо округлення:</p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">SELECT title, amount, price,
       ROUND(IF(amount &lt; 4, price * 0.5, price * 0.7), 2) AS sale
FROM books;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+-----------------------+--------+--------+--------+
| title                 | amount | price  | sale   |
+-----------------------+--------+--------+--------+
| Кайдашева сімʼя       | 3      | 320.50 | 160.25 |
| Тіні забутих предків  | 5      | 410.00 | 287.00 |
| Кобзар                | 10     | 520.00 | 364.00 |
| Маруся                | 2      | 300.00 | 150.00 |
| Лісова пісня          | 7      | 450.00 | 315.00 |
+-----------------------+--------+--------+--------+</pre>

  <p><strong>Приклад</strong></p>

  <p>Ускладнімо обчислення знижки залежно від кількості книг. Якщо кількість книг менша за 4 — знижка становить 50%.
    Для інших книг, кількість яких менша за 11 — знижка 30%.
    Для всіх решти — знижка 10%. Також вкажемо, яка саме знижка застосовується до кожної книги.</p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">SELECT title, amount, price,
       ROUND(
         IF(amount &lt; 4, price * 0.5,
           IF(amount &lt; 11, price * 0.7, price * 0.9)
         ), 2) AS sale,
       IF(amount &lt; 4, 'знижка 50%',
         IF(amount &lt; 11, 'знижка 30%', 'знижка 10%')
       ) AS Ваша_знижка
FROM books;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+-----------------------+--------+--------+--------+-------------+
| title                 | amount | price  | sale   | Ваша_знижка |
+-----------------------+--------+--------+--------+-------------+
| Кайдашева сімʼя       | 3      | 320.50 | 160.25 | знижка 50%  |
| Тіні забутих предків  | 5      | 410.00 | 287.00 | знижка 30%  |
| Кобзар                | 10     | 520.00 | 364.00 | знижка 30%  |
| Маруся                | 2      | 300.00 | 150.00 | знижка 50%  |
| Лісова пісня          | 7      | 450.00 | 315.00 | знижка 30%  |
+-----------------------+--------+--------+--------+-------------+</pre>

  <h3>Завдання</h3>

  <p>При аналізі продажів з’ясувалося, що найбільшим попитом користуються книги Тараса Шевченка, а на другому місці – книги Лесі Українки.
    Тому було прийнято рішення підняти ціну книг Шевченка на 10%, а книг Лесі Українки – на 5%.
    Напишіть запит, який виведе автора, назву книги та нову ціну (стовпець назвати <code>new_price</code>). Значення нової ціни округлити до двох знаків після коми.</p>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">+--------------------------+-----------------------+-----------+
| author                   | title                 | new_price |
+--------------------------+-----------------------+-----------+
| Нечуй-Левицький І.С.     | Кайдашева сімʼя       | 320.50    |
| Коцюбинський М.М.        | Тіні забутих предків  | 410.00    |
| Шевченко Т.Г.            | Кобзар                | 572.00    |
| Квітка-Основʼяненко Г.Ф. | Маруся                | 300.00    |
| Леся Українка            | Лісова пісня          | 472.50    |
+--------------------------+-----------------------+-----------+</pre>

  <div id="toggle">
    <div>
      <span class="arrow-text"><strong>Структура та вміст таблиці</strong> <code>books</code></span>
    </div>
  </div>
  <div id="hiddenText">
    <pre class="sqlResultTable">+---------+-----------------------+--------------------------+--------+--------+
| book_id | title                 | author                   | price  | amount |
+---------+-----------------------+--------------------------+--------+--------+
| 1       | Кайдашева сімʼя       | Нечуй-Левицький І.С.     | 320.50 | 3      |
| 2       | Тіні забутих предків  | Коцюбинський М.М.        | 410.00 | 5      |
| 3       | Кобзар                | Шевченко Т.Г.            | 520.00 | 10     |
| 4       | Маруся                | Квітка-Основʼяненко Г.Ф. | 300.00 | 2      |
| 5       | Лісова пісня          | Леся Українка            | 450.00 | 7      |
+---------+-----------------------+--------------------------+--------+--------+</pre>
  </div>
</div>