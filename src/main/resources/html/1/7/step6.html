<div class="container">

    <h2>Завдання</h2>

    <p>Водії сплачують свої штрафи. У таблиці <code>payment</code> занесені дати їх оплати:</p>

    <table class="tableSql">
        <thead>
            <tr>
                <th>payment_id</th>
                <th>name</th>
                <th>number_plate</th>
                <th>violation</th>
                <th>date_violation</th>
                <th>date_payment</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Яковлев Г.Р.</td>
                <td>М701АА</td>
                <td>Превышение скорости (от 20 до 40)</td>
                <td>2020-01-12</td>
                <td>2020-01-22</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Баранов П.Е.</td>
                <td>Р523ВТ</td>
                <td>Превышение скорости (от 40 до 60)</td>
                <td>2020-02-14</td>
                <td>2020-03-06</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Яковлев Г.Р.</td>
                <td>Т330ТТ</td>
                <td>Проезд на запрещающий сигнал</td>
                <td>2020-03-03</td>
                <td>2020-03-23</td>
            </tr>
        </tbody>
    </table>


    <p>
        У таблиці <code>fine</code> потрібно:
    <ul>
        <li>внести дату оплати штрафу з таблиці <code>payment</code>,</li>
        <li>зменшити суму штрафу <strong>вдвічі</strong>, якщо оплата здійснена не пізніше ніж через 20 днів після
            порушення.</li>
    </ul>
    </p>


    <div id="toggle1">
        <div>
            <span class="arrow-text"><strong>Пояснення до завдання</strong></span>
        </div>
    </div>
    <div id="hiddenText1">
        <ol>
            <li>
                Для зменшення суми штрафу вдвічі залежно від умови можна використати функцію <code>IF()</code>.
                Синтаксис секції <code>SET</code> при використанні <code>IF()</code> виглядає так:
                <pre class="sqlCodeBlock">SET стовпець = IF(умова, вираз_1, вираз_2)</pre>
                Виконується цей оператор так:
                <ul>
                    <li>спочатку обчислюється умова;</li>
                    <li>якщо умова ІСТИННА – обчислюється <code>вираз_1</code>, інакше — <code>вираз_2</code>;</li>
                    <li>у стовпець записується результат — залежно від умови.</li>
                </ul>
                Наприклад, щоб обнулити штрафи, менші або рівні 500, а інші залишити без змін:
                <pre class="sqlCodeBlock">UPDATE fine
SET sum_fine = IF(sum_fine &lt;= 500, 0, sum_fine)</pre>
            </li>
            <li>
                Кількість днів між датою порушення та датою оплати обчислюється за формулою:
                <pre class="sqlCodeBlock">кількість_днів = дата_оплати - дата_порушення</pre>
            </li>
        </ol>
    </div>

    <p></p>

    <div id="toggle2">
        <div>
            <span class="arrow-text"><strong>Пояснення до рішення (Якщо запит не працює або виникає помилка — розгорніть це пояснення)</strong></span>
        </div>
    </div>
    <div id="hiddenText2">
        <p>Шаблон запиту:</p>
        <pre class="sqlCodeBlock">UPDATE
    fine, payment
SET 
    fine.date_payment = дата оплати з payment,
    fine.sum_fine = порівняти різницю між датою порушення та датою оплати (з payment) 
                    і за необхідності зменшити розмір штрафу (використати IF)
WHERE
    вказати умову, що збігаються і номери машин, і порушення, і 
    прізвище водія у таблицях fine і payment, а також, що
    дата оплати в fine має бути порожньою</pre>
    </div>

    <p></p>


    <div id="toggle3">
        <div>
            <span class="arrow-text"><strong>Результат</strong></span>
        </div>
    </div>
    <div id="hiddenText3">
        <p>Affected rows: 3</p>
        <pre class="sqlResultTable">+---------------+--------+----------------------------------+----------+------------+--------------+
| name          | number | violation                        | sum_fine | date_violation | date_payment |
+---------------+--------+----------------------------------+----------+----------------+--------------+
| Баранов П.Е.  | Р523ВТ | Перевищення швидкості(від 40 до 60) | 500.00   | 2020-01-12     | 2020-01-17   |
| Абрамова К.А. | О111АВ | Проїзд на заборонний сигнал         | 1000.00  | 2020-01-14     | 2020-02-27   |
| Яковлев Г.Р.  | Т330ТТ | Перевищення швидкості(від 20 до 40) | 500.00   | 2020-01-23     | 2020-02-23   |
| Яковлев Г.Р.  | М701АА | Перевищення швидкості(від 20 до 40) | 250.00   | 2020-01-12     | 2020-01-22   |
| Колесов С.П.  | К892АХ | Перевищення швидкості(від 20 до 40) | 500.00   | 2020-02-01     | NULL         |
| Баранов П.Е.  | Р523ВТ | Перевищення швидкості(від 40 до 60) | 2000.00  | 2020-02-14     | 2020-03-06   |
| Абрамова К.А. | О111АВ | Проїзд на заборонний сигнал         | 2000.00  | 2020-02-23     | NULL         |
| Яковлев Г.Р.  | Т330ТТ | Проїзд на заборонний сигнал         | 500.00   | 2020-03-03     | 2020-03-23   |
+---------------+--------+----------------------------------+----------+----------------+--------------+</pre>
    </div>

    <p></p>

    <div id="toggle4">
        <div>
            <span class="arrow-text"><strong>Пов’язані кроки</strong></span>
        </div>
    </div>
    <div id="hiddenText4">
        <ul>
            <li>оновлення даних (крок за кроком);</li>
            <li>використання функції IF();</li>
            <li>обчислення різниці між датами;</li>
            <li>умови відбору.</li>
        </ul>
    </div>

    <p></p>

    <div id="toggle5">
        <div>
            <span class="arrow-text"><strong>Структура та наповнення таблиці fine до оновлення</strong></span>
        </div>
    </div>
    <div id="hiddenText5">
        <pre class="sqlResultTable">+---------------+--------+------------------------------+----------+----------------+--------------+
| name          | number | violation                    | sum_fine | date_violation | date_payment |
+---------------+--------+------------------------------+----------+----------------+--------------+
| Баранов П.Е.  | Р523ВТ | Перевищення швидкості(від 40... | 500.00   | 2020-01-12     | 2020-01-17   |
| Абрамова К.А. | О111АВ | Проїзд на заборонний сигнал     | 1000.00  | 2020-01-14     | 2020-02-27   |
| Яковлев Г.Р.  | Т330ТТ | Перевищення швидкості(від 20... | 500.00   | 2020-01-23     | 2020-02-23   |
| Яковлев Г.Р.  | М701АА | Перевищення швидкості(від 20... | 500.00   | 2020-01-12     | NULL         |
| Колесов С.П.  | К892АХ | Перевищення швидкості(від 20... | 500.00   | 2020-02-01     | NULL         |
| Баранов П.Е.  | Р523ВТ | Перевищення швидкості(від 40... | 2000.00  | 2020-02-14     | NULL         |
| Абрамова К.А. | О111АВ | Проїзд на заборонний сигнал     | 2000.00  | 2020-02-23     | NULL         |
| Яковлев Г.Р.  | Т330ТТ | Проїзд на заборонний сигнал     | 1000.00  | 2020-03-03     | NULL         |
+---------------+--------+------------------------------+----------+----------------+--------------+</pre>
    </div>

</div>