<div class="container">
    <h2>Використання тимчасової назви таблиці (аліаса)</h2>
    <p>
        Теоретичний матеріал до цього кроку підготував Михайло Захаров. Велика йому подяка!
    </p>
    <p>
        Щоб не писати назву таблиці кожного разу, зручно використовувати <strong>аліаси</strong>.
    </p>
    <p>
        Аліас — це псевдонім, який ми призначали стовпцям після ключового слова <code>AS</code>. Аліаси також можна
        використовувати і для таблиць. Це особливо актуально, коли використовується багато таблиць у запиті (іноді й 5,
        і 10 і більше). Псевдоніми допомагають зробити запит чистішим і читабельнішим.
    </p>

    <p>Для присвоєння псевдоніма існує два варіанти:</p>

    <ul>
        <li>З використанням ключового слова AS</li>
    </ul>

    <pre class="sqlCodeBlock">FROM fine AS f, traffic_violation AS tv</pre>

    <ul>
        <li>Або без нього</li>
    </ul>

    <pre class="sqlCodeBlock">FROM fine f, traffic_violation tv</pre>

    <ul>
        <li>Після цього використовуємо аліаси в запиті</li>
    </ul>

    <pre class="sqlCodeBlock">WHERE f.violation = tv.violation</pre>

    <p><strong>Приклад</strong></p>
    <p>
        Для тих, хто вже оплатив штраф, вивести інформацію про те, чи змінювалася стандартна сума штрафу.
    </p>

    <p class="skewed">Запит:</p>

    <pre class="sqlCodeBlock">SELECT  f.name, f.number_plate, f.violation, 
    IF(
      f.sum_fine = tv.sum_fine, "Стандартна сума штрафу", 
      IF(
        f.sum_fine < tv.sum_fine, "Зменшена сума штрафу", "Збільшена сума штрафу"
      )
    ) AS description               
  FROM fine f, traffic_violation tv
  WHERE tv.violation = f.violation AND f.sum_fine IS NOT NULL;</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">+---------------+--------------+--------------------------------------+------------------------+
| name          | number_plate | violation                            | description            |
+---------------+--------------+--------------------------------------+------------------------+
| Бондар О.В.   | АА1234КІ     | Перевищення швидкості (від 40 до 60) | Зменшена сума штрафу   |
| Коваль А.С.   | ВС4567AB     | Проїзд на заборонений сигнал         | Стандартна сума штрафу |
| Шевченко П.М. | КА8901ІВ     | Перевищення швидкості (від 20 до 40) | Стандартна сума штрафу |
+---------------+--------------+--------------------------------------+------------------------+</pre>

    <h3>Завдання</h3>
    <p>
        Заповнити в таблиці <code>fine</code> суми штрафів, які має сплатити водій, відповідно до даних з таблиці
        <code>traffic_violation</code>. Суми потрібно додавати тільки в порожні поля стовпця <code>sum_fine</code>.
    </p>

    <p><strong>Важливо!</strong> Порівняння значення шпальти з порожнім значенням здійснюється за допомогою оператора
        <code>IS NULL</code>
    </p>

    <p></p>


    <div id="toggle1">
        <div>
            <span class="arrow-text"><strong>Пояснення</strong></span>
        </div>
    </div>
    <div id="hiddenText1">
        <ol>
            <li>
                Після ключового слова <code>UPDATE</code> вкажіть окрім оновлюваної таблиці <code>fine</code> також
                <code>traffic_violation</code>, щоб запит "бачив" обидві таблиці. Спочатку перелічуються джерела, потім
                виконується оновлення.
            </li>
            <p></p>
            <li>
                Оновлюйте лише ті записи таблиці <code>fine</code>, де значення <code>violation</code> збігається з
                відповідним полем з <code>traffic_violation</code>, а <code>sum_fine</code> є <code>NULL</code>.
            </li>
        </ol>
    </div>

    <p></p>

    <div id="toggle2">
        <div>
            <span class="arrow-text"><strong>Результат</strong></span>
        </div>
    </div>
    <div id="hiddenText2">
        <pre class="sqlResultTable">Affected rows: 5
+----------------+--------+-------------------------------+---------+----------------+--------------+
| name           | number | violation                     | sum_fine| date_violation | date_payment |
+----------------+--------+-------------------------------+---------+----------------+--------------+
| Баранов П.Е.   | Р523ВТ | Превышение скорости(от 40-60) | 500.00  | 2020-01-12     | 2020-01-17   |
| Абрамова К.А.  | О111АВ | Проезд на запрещающий сигнал  | 1000.00 | 2020-01-14     | 2020-02-27   |
| Яковлев Г.Р.   | Т330ТТ | Превышение скорости(от 20-40) | 500.00  | 2020-01-23     | 2020-02-23   |
| Яковлев Г.Р.   | М701АА | Превышение скорости(от 20-40) | 500.00  | 2020-01-12     | NULL         |
| Колесов С.П.   | К892АХ | Превышение скорости(от 20-40) | 500.00  | 2020-02-01     | NULL         |
| Баранов П.Е.   | Р523ВТ | Превышение скорости(от 40-60) | 1000.00 | 2020-02-14     | NULL         |
| Абрамова К.А.  | О111АВ | Проезд на запрещающий сигнал  | 1000.00 | 2020-02-23     | NULL         |
| Яковлев Г.Р.   | Т330ТТ | Проезд на запрещающий сигнал  | 1000.00 | 2020-03-03     | NULL         |
+----------------+--------+-------------------------------+---------+----------------+--------------+</pre>
    </div>

    <p></p>


    <div id="toggle3">
        <div>
            <span class="arrow-text"><strong>Пов’язані кроки</strong></span>
        </div>
    </div>
    <div id="hiddenText3">
        <ul>
            <li>Оновлення даних (покроково)</li>
            <li>Умови відбору</li>
        </ul>
    </div>


    <p></p>

    <div id="toggle4">
        <div>
            <span class="arrow-text"><strong>Структура та наповнення вихідної таблиці fine та
                    таблиці traffic_violation
                </strong></span>
        </div>
    </div>
    <div id="hiddenText4">
        <pre class="sqlResultTable">+---------+---------------+--------------+--------------------------------------+----------+----------------+--------------+
| fine_id | name          | number_plate | violation                            | sum_fine | date_violation | date_payment |
+---------+---------------+--------------+--------------------------------------+----------+----------------+--------------+
| 1       | Бондар О.В.   | АА1234КІ     | Перевищення швидкості (від 40 до 60) | 500      | 2020-01-12     | 2020-01-17   |
| 2       | Коваль А.С.   | ВС4567ЛТ     | Проїзд на заборонений сигнал         | 1000     | 2020-01-14     | 2020-02-27   |
| 3       | Шевченко П.М. | КА8901ІВ     | Перевищення швидкості (від 20 до 40) | 500      | 2020-01-23     | 2020-02-23   |
| 4       | Мельник І.Г.  | СЕ7012АН     | Перевищення швидкості (від 20 до 40) | NULL     | 2020-01-12     | NULL         |
| 5       | Олійник В.Д.  | AE8923КХ     | Перевищення швидкості (від 20 до 40) | NULL     | 2020-02-01     | NULL         |
| 6       | Бондар О.В.   | АА1234КІ     | Перевищення швидкості (від 40 до 60) | NULL     | 2020-02-14     | NULL         |
| 7       | Коваль А.С.   | ВС4567ЛТ     | Проїзд на заборонений сигнал         | NULL     | 2020-02-23     | NULL         |
| 8       | Шевченко П.М. | КА8901ІВ     | Проїзд на заборонений сигнал         | NULL     | 2020-03-03     | NULL         |
+---------+---------------+--------------+--------------------------------------+----------+----------------+--------------+

+--------------+--------------------------------------+----------+
| violation_id | violation                            | sum_fine |
+--------------+--------------------------------------+----------+
| 1            | Перевищення швидкості (від 20 до 40) | 500      |
| 2            | Перевищення швидкості (від 40 до 60) | 1000     |
| 3            | Проїзд на заборонений сигнал         | 1000     |
+--------------+--------------------------------------+----------+</pre>

    </div>

</div>