<div class="container">
    <h2>Вибірка даних із обчисленнями, групові функції</h2>

    <p>У SQL як аргумент для групових функцій можна використовувати не лише назву стовпця, а й будь-який допустимий
        арифметичний вираз.</p>

    <p><strong>Приклад</strong></p>
    <p>Вивести загальну вартість книг кожного автора.</p>

    <p class="skewed">Запит:</p>
    <pre class="sqlCodeBlock">SELECT author, SUM(price * amount) AS Вартість
FROM book
GROUP BY author;</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">Affected rows: 3
+----------------------+----------+
| author               | вартість |
+----------------------+----------+
| Коцюбинський М.М.    | 4715.47  |
| Нечуй-Левицький І.С. | 6198.02  |
| Кобилянська О.Ю.     | 9750     |
+----------------------+----------+</pre>

    <p>Групові функції можна використовувати у виразах. Наприклад, якщо при обчисленні середньої вартості книг кожного
        автора отримаємо значення з шістьма знаками після коми, а оскільки це гроші, слід округлити до 2 знаків після
        коми.</p>

    <p><strong>Приклад</strong></p>
    <p>Знайти середню ціну книг кожного автора.</p>

    <p class="skewed">Запит:</p>
    <pre class="sqlCodeBlock">SELECT author, ROUND(AVG(price), 2) AS Средняя_цена
FROM book
GROUP BY author;</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">Affected rows: 3
+----------------------+--------------+
| author               | средняя_цена |
+----------------------+--------------+
| Коцюбинський М.М.    | 605.75       |
| Нечуй-Левицький І.С. | 629.51       |
| Кобилянська О.Ю.     | 650          |
+----------------------+--------------+</pre>

    <h2>Завдання</h2>
    <p>Для кожного автора обчислити загальну вартість книг <code>S</code> (назвати стовпець <code>Вартість</code>), а
        також розрахувати податок на додану вартість (назвати стовпець <code>ПДВ</code>), який включений у вартість і
        становить 18% (k = 18), а також вартість книг без ПДВ (назвати стовпець <code>Вартість_без_ПДВ</code>).
        Значення округлити до двох знаків після коми.</p>

    <p>Формули:</p>
    <div data-img-id="1.3.4.1"></div>

    <p></p>

    <div id="toggle2" style="cursor: pointer;">
        <div>
            <span class="arrow-text"><strong>Результат</strong></span>
        </div>
    </div>

    <div id="hiddenText2" style="display:none;">
        <pre class="sqlResultTable">Affected rows: 3
+----------------------+----------+---------+------------------+
| author               | вартість | ПДВ     | Вартість_без_ПДВ |
+----------------------+----------+---------+------------------+
| Коцюбинський М.М.    | 4715.47  | 719.31  | 3996.16          |
| Нечуй-Левицький І.С. | 6198.02  | 945.46  | 5252.56          |
| Кобилянська О.Ю.     | 9750     | 1487.29 | 8262.71          |
+----------------------+----------+---------+------------------+</pre>
    </div>

    <p></p>

    <div id="toggle3" style="cursor: pointer;">
        <div>
            <span class="arrow-text"><strong>Пояснення</strong></span>
        </div>
    </div>

    <div id="hiddenText3" style="display:none;">
        <p>Імена стовпців, задані через <code>AS</code>, не можна використовувати в інших виразах у тому ж запиті —
            використовуйте назви стовпців з оригінальної таблиці.</p>
    </div>

    <p></p>

    <div id="toggle4" style="cursor: pointer;">
        <div>
            <span class="arrow-text"><strong>Структура та наповнення таблиці <code>book</code></strong></span>
        </div>
    </div>

    <div id="hiddenText4" style="display:none;">
        <pre class="sqlResultTable">+---------+----------------------+----------------------+--------+--------+
| book_id | title                | author               | amount | price  |
+---------+----------------------+----------------------+--------+--------+
| 1       | Тіні забутих предків | Коцюбинський М.М.    | 3      | 670.99 |
| 2       | Intermezzo           | Коцюбинський М.М.    | 5      | 540.5  |
| 3       | Кайдашева сім’я      | Нечуй-Левицький І.С. | 10     | 460    |
| 4       | Хмари                | Нечуй-Левицький І.С. | 2      | 799.01 |
| 5       | Земля                | Кобилянська О.Ю.     | 15     | 650    |
+---------+----------------------+----------------------+--------+--------+</pre>
    </div>
</div>
