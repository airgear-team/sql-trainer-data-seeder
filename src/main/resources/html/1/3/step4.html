<div class="container">
    <h2>Вибірка даних із обчисленнями, групові функції</h2>

    <p>У SQL як аргумент для групових функцій можна використовувати не лише назву стовпця, а й будь-який допустимий
        арифметичний вираз.</p>

    <p><strong>Приклад</strong></p>
    <p>Вивести загальну вартість книг кожного автора.</p>

    <p class="skewed">Запит:</p>
    <pre class="sqlCodeBlock">SELECT author, SUM(price * amount) AS Вартість
FROM book
GROUP BY author;</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">+--------------------------+-----------+
| author                   | Вартість  |
+--------------------------+-----------+
| Нечуй-Левицький І.С.     | 961.50    |
| Коцюбинський М.М.        | 2050.00   |
| Шевченко Т.Г.            | 5200.00   |
| Квітка-Основʼяненко Г.Ф. | 600.00    |
| Леся Українка            | 3150.00   |
+--------------------------+-----------+</pre>

    <p>Групові функції можна використовувати у виразах. Наприклад, якщо при обчисленні середньої вартості книг кожного
        автора отримаємо значення з шістьма знаками після коми, а оскільки це гроші, слід округлити до 2 знаків після
        коми.</p>

    <p><strong>Приклад</strong></p>
    <p>Знайти середню ціну книг кожного автора.</p>

    <p class="skewed">Запит:</p>
    <pre class="sqlCodeBlock">SELECT author, ROUND(AVG(price), 2) AS Средняя_цена
FROM book
GROUP BY author;</pre>

    <p class="skewed">Результат:</p>
    <pre class="sqlResultTable">+--------------------------+--------------+
| author                   | Средняя_цена |
+--------------------------+--------------+
| Нечуй-Левицький І.С.     | 320.50       |
| Коцюбинський М.М.        | 410.00       |
| Шевченко Т.Г.            | 520.00       |
| Квітка-Основʼяненко Г.Ф. | 300.00       |
| Леся Українка            | 450.00       |
+--------------------------+--------------+</pre>

    <h2>Завдання</h2>
    <p>Для кожного автора обчислити загальну вартість книг <code>S</code> (назвати стовпець <code>Вартість</code>), а
        також розрахувати податок на додану вартість (назвати стовпець <code>ПДВ</code>), який включений у вартість і
        становить 18% (k = 18), а також вартість книг без ПДВ (назвати стовпець <code>Вартість_без_ПДВ</code>).
        Значення округлити до двох знаків після коми.</p>

    <p>Формули:</p>
    <div data-img-id="1.3.4.1"></div>

    <p></p>

    <div id="toggle2" style="cursor: pointer;">
        <div>
            <span class="arrow-text"><strong>Результат</strong></span>
        </div>
    </div>

    <div id="hiddenText2" style="display:none;">
        <pre class="sqlResultTable">+--------------------------+-----------+---------+-------------------+
| author                   | Вартість  | ПДВ     | Вартість_без_ПДВ  |
+--------------------------+-----------+---------+-------------------+
| Нечуй-Левицький І.С.     | 961.50    | 146.65  | 814.85            |
| Коцюбинський М.М.        | 2050.00   | 312.29  | 1737.71           |
| Шевченко Т.Г.            | 5200.00   | 793.22  | 4406.78           |
| Квітка-Основʼяненко Г.Ф. | 600.00    | 91.53   | 508.47            |
| Леся Українка            | 3150.00   | 480.51  | 2669.49           |
+--------------------------+-----------+---------+-------------------+</pre>
    </div>

    <p></p>

    <div id="toggle3" style="cursor: pointer;">
        <div>
            <span class="arrow-text"><strong>Пояснення</strong></span>
        </div>
    </div>

    <div id="hiddenText3" style="display:none;">
        <p>Імена стовпців, задані через <code>AS</code>, не можна використовувати в інших виразах у тому ж запиті —
            використовуйте назви стовпців з оригінальної таблиці.</p>
    </div>

    <p></p>

    <div id="toggle4" style="cursor: pointer;">
        <div>
            <span class="arrow-text"><strong>Структура та наповнення таблиці <code>book</code></strong></span>
        </div>
    </div>

    <div id="hiddenText4" style="display:none;">
        <pre class="sqlResultTable">+---------+--------------------------+--------------------------+--------+--------+
| book_id | title                    | author                   | price  | amount |
+---------+--------------------------+--------------------------+--------+--------+
| 1       | Кайдашева сімʼя          | Нечуй-Левицький І.С.     | 320.50 | 3      |
| 2       | Тіні забутих предків     | Коцюбинський М.М.        | 410.00 | 5      |
| 3       | Кобзар                   | Шевченко Т.Г.            | 520.00 | 10     |
| 4       | Маруся                   | Квітка-Основʼяненко Г.Ф. | 300.00 | 2      |
| 5       | Лісова пісня             | Леся Українка            | 450.00 | 7      |
+---------+--------------------------+--------------------------+--------+--------+</pre>
    </div>
</div>
