<div class="container">
  <h2>Вибірка даних за умовою, групові функції</h2>

  <p>У запитах з груповими функціями можна включати умову відбору рядків, яка в звичайних запитах записується після
    <code>WHERE</code>. У запитах з груповими функціями замість <code>WHERE</code> використовується ключове слово
    <code>HAVING</code>, яке розміщується після оператора <code>GROUP BY</code>.
  </p>

  <p><strong>Приклад</strong></p>

  <p>Знайти мінімальну і максимальну ціну книг усіх авторів, загальна вартість книг яких більше 5000.</p>

  <p class="skewed">Запит:</p>

  <pre class="sqlCodeBlock">SELECT author,
       MIN(price) AS Мінімальна_ціна,
       MAX(price) AS Максимальна_ціна
FROM book
GROUP BY author
HAVING SUM(price * amount) &gt; 5000;</pre>

  <p class="skewed">Результат:</p>

  <pre class="sqlResultTable">+-------------------------------+------------------+-------------------+
| author                        | Мінімальна_ціна  | Максимальна_ціна  |
+-------------------------------+------------------+-------------------+
| Коцюбинський М.М.             | 410.00           | 410.00            |
| Шевченко Т.Г.                 | 520.00           | 520.00            |
| Леся Українка                 | 450.00           | 450.00            |
+-------------------------------+------------------+-------------------+</pre>

  <p>Також у запитах з групуванням можна сортувати дані.</p>

  <p><strong>Приклад</strong></p>
  <p>Знайти мінімальну і максимальну ціну книг усіх авторів, загальна вартість книг яких більше 5000. Результат
    вивести за спаданням мінімальної ціни.</p>

  <pre class="sqlCodeBlock">SELECT author,
       MIN(price) AS Мінімальна_ціна,
       MAX(price) AS Максимальна_ціна
FROM book
GROUP BY author
HAVING SUM(price * amount) &gt; 5000
ORDER BY Мінімальна_ціна DESC;</pre>

  <p class="skewed">Результат:</p>

  <pre class="sqlResultTable">+-------------------------------+------------------+-------------------+
| author                        | Минимальная_цена | Максимальна_ціна |
+-------------------------------+------------------+-------------------+
| Шевченко Т.Г.                 | 520.00           | 520.00            |
| Леся Українка                 | 450.00           | 450.00            |
| Коцюбинський М.М.             | 410.00           | 410.00            |
+-------------------------------+------------------+-------------------+</pre>

  <div id="toggle1" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Пояснення</strong></span>
    </div>
  </div>

  <div id="hiddenText1" style="display:none;">
    <p>При вказівці стовпця, за яким виконується сортування, якщо стовпцю присвоєно ім'я за допомогою <code>AS</code>,
      можна використовувати це ім'я.
    </p>
  </div>

  <h2>Завдання</h2>

  <p>Обчислити середню ціну і сумарну вартість тих книг, кількість екземплярів яких належить інтервалу від 5 до 14
    включно. Стовпці назвати <code>Середня_ціна</code> і <code>Вартість</code>, значення округлити до 2 знаків після
    коми.
  </p>

  <div id="toggle2" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Результат</strong></span>
    </div>
  </div>

  <div id="hiddenText2" style="display:none;">
    <pre class="sqlResultTable">+--------------+-----------+
| Середня_ціна | Вартість  |
+--------------+-----------+
| 460.00       | 12150.00  |
+--------------+-----------+</pre>
  </div>

  <div id="toggle3" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Пояснення</strong></span>
    </div>
  </div>

  <div id="hiddenText3" style="display:none;">
    <p>Якщо у запиті з груповими функціями відсутній <code>GROUP BY</code>, то для відбору записів використовується
      ключове слово <code>WHERE</code>.
    </p>
  </div>

  <div id="toggle4" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Структура та наповнення таблиці <code>book</code></strong></span>
    </div>
  </div>

  <div id="hiddenText4" style="display:none;">
    <pre class="sqlResultTable">+---------+-------------------------------+-------------------------------+--------+--------+
| book_id | title                         | author                        | price  | amount |
+---------+-------------------------------+-------------------------------+--------+--------+
| 1       | Кайдашева сімʼя               | Нечуй-Левицький І.С.          | 320.50 | 3      |
| 2       | Тіні забутих предків          | Коцюбинський М.М.             | 410.00 | 5      |
| 3       | Кобзар                         | Шевченко Т.Г.                 | 520.00 | 10     |
| 4       | Маруся                         | Квітка-Основʼяненко Г.Ф.      | 300.00 | 2      |
| 5       | Лісова пісня                   | Леся Українка                  | 450.00 | 7      |
+---------+-------------------------------+-------------------------------+--------+--------+</pre>
  </div>
</div>
