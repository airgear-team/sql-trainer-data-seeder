<div class="container">
  <h2>Вкладений запит, оператор IN</h2>

  <p>
    Вкладений запит може повертати декілька значень одного стовпця. У такому випадку його можна використовувати в
    розділі <code>WHERE</code> разом з оператором <code>IN</code>:
  </p>

  <p>
    <code>WHERE ім’я_стовпця IN (вкладений запит, що повертає один стовпець)</code>
  </p>

  <p>
    Оператор <code>IN</code> визначає, чи збігається значення стовпця з одним із значень, що містяться у вкладеному
    запиті. У цьому випадку логічний вираз після <code>WHERE</code> набуває значення істина. Оператор
    <code>NOT IN</code> виконує протилежну дію — вираз істинний, якщо значення стовпця не міститься у вкладеному запиті.
  </p>

  <h3>Приклад</h3>

  <p>
    Вивести інформацію про книги тих авторів, загальна кількість примірників книг яких не менша за 12.
  </p>

  <p class="skewed">Запит:</p>

  <pre class="sqlCodeBlock">SELECT title, author, amount, price
FROM book
WHERE author IN (
        SELECT author 
        FROM book 
        GROUP BY author 
        HAVING SUM(amount) >= 12
      );</pre>

  <p class="skewed">Результат:</p>

  <pre class="sqlResultTable">Affected rows: 3
+-----------------+----------------------+--------+--------+
| title           | author               | amount | price  |
+-----------------+----------------------+--------+--------+
| Кайдашева сім’я | Нечуй-Левицький І.С. | 10     | 460    |
| Хмари           | Нечуй-Левицький І.С. | 2      | 799.01 |
| Земля           | Кобилянська О.Ю.     | 15     | 650    |
+-----------------+----------------------+--------+--------+</pre>

  <p>
    Вкладений запит відбирає двох авторів (Нечуй-Левицький І.С. і Кобилянська О.Ю.). А в основному запиті для кожного запису таблиці
    <code>book</code> перевіряється, чи входить автор книги до відібраного списку. Якщо входить — інформація про книгу
    включається в запит.
  </p>

  <h3>Завдання</h3>

  <p>
    Вивести інформацію (автора, книгу та кількість) про ті книги, кількість примірників яких у таблиці <code>book</code>
    не дублюється.
  </p>

  <p></p>

  <div id="toggle1" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Пояснення до завдання</strong></span>
    </div>
  </div>

  <div id="hiddenText1" style="display:none;">

    <p>
      У таблиці <code>book</code> у стовпці <code>amount</code> зберігається кількість примірників кожної книги:
    </p>

    <pre class="sqlResultTable">Affected rows: 6
+----------------------+--------+
| title                | amount |
+----------------------+--------+
| Тіні забутих предків | 3      |
| Intermezzo           | 5      |
| Кайдашева сім’я      | 10     |
| Хмари                | 2      |
| Земля                | 15     |
| Нове життя           | 10     |
+----------------------+--------+</pre>

    <p>
      Відповідно до цієї таблиці:
    </p>
    <ul>
      <li>кількість примірників книги «Тіні забутих предків» — 3, такого значення більше немає — книга підходить;</li>
      <li>кількість примірників книги «Intermezzo» — 5, такого значення більше немає — книга підходить;</li>
      <li>кількість примірників книги «Кайдашева сім’я» — 10, значення повторюється для «Нове життя» — не підходить;</li>
      <li>кількість примірників книги «Хмари» — 2, такого значення більше немає — книга підходить;</li>
      <li>кількість примірників книги «Земля» — 15, такого значення більше немає — книга підходить;</li>
      <li>кількість примірників книги «Нове життя» — 10, значення повторюється для «Кайдашева сім’я» — не підходить;</li>
    </ul>

    <p>
      Отже, потрібно вивести ті рядки таблиці, де значення у стовпці <code>amount</code> не повторюється.
    </p>


  </div>


  <p></p>

  <div id="toggle2" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Результат</strong></span>
    </div>
  </div>

  <div id="hiddenText2" style="display:none;">
    <pre class="sqlResultTable">Affected rows: 4
+----------------------+----------------------+--------+
| author               | title                | amount |
+----------------------+----------------------+--------+
| Нечуй-Левицький І.С. | Хмари                | 2      |
| Коцюбинський М.М.    | Тіні забутих предків | 3      |
| Коцюбинський М.М.    | Intermezzo           | 5      |
| Кобилянська О.Ю.     | Земля                | 15     |
+----------------------+----------------------+--------+</pre>
  </div>

  <p></p>

  <div id="toggle3" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Пояснення до розв'язання</strong></span>
    </div>
  </div>

  <div id="hiddenText3" style="display:none;">
    <p>
      У вкладеному запиті відібрати ті значення стовпця <code>amount</code>, кількість яких, обчислена за допомогою
      функції <code>COUNT()</code>, дорівнює 1.
    </p>
  </div>


  <p></p>

  <div id="toggle4" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Структура та наповнення таблиці</strong><code>book</code></span>
    </div>
  </div>

  <div id="hiddenText4" style="display:none;">
    <pre class="sqlResultTable">+---------+----------------------+----------------------+--------+--------+
| book_id | title                | author               | amount | price  |
+---------+----------------------+----------------------+--------+--------+
| 1       | Тіні забутих предків | Коцюбинський М.М.    | 3      | 670.99 |
| 2       | Intermezzo           | Коцюбинський М.М.    | 5      | 540.5  |
| 3       | Кайдашева сім’я      | Нечуй-Левицький І.С. | 10     | 460    |
| 4       | Хмари                | Нечуй-Левицький І.С. | 2      | 799.01 |
| 5       | Земля                | Кобилянська О.Ю.     | 15     | 650    |
| 6       | Нове життя           | Петренко П.П.        | 10     | 480.5  |
+---------+----------------------+----------------------+--------+--------+</pre>

  </div>
</div>