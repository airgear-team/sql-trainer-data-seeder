<div class="container">
  <h2>Оновлення записів у кількох таблицях</h2>

  <p>
    У SQL-запитах на оновлення (<code>UPDATE</code>) можна працювати одночасно з кількома таблицями.
    Але при цьому потрібно дотримуватись таких правил:
  </p>

  <ul>
    <li>Для стовпців з однаковими назвами слід зазначати назву таблиці, наприклад: <code>book.price</code> або
      <code>supply.price</code>.
    </li>
    <li>Усі таблиці мають бути вказані після ключового слова <code>UPDATE</code>.</li>
    <li>Запит повинен містити умову <code>WHERE</code>, яка визначає, коли слід оновлювати записи.</li>
  </ul>

  <h3>Приклад</h3>
  <p>Якщо в таблиці <code>supply</code> вже є книги, що присутні в <code>book</code>, дублювати їх не потрібно.
    Замість цього слід збільшити їхню кількість на відповідне значення з поля <code>amount</code> у <code>supply</code>.
  </p>

  <p class="skewed">Запит:</p>
  <pre class="sqlCodeBlock">UPDATE book, supply
SET book.amount = book.amount + supply.amount
WHERE book.title = supply.title AND book.author = supply.author;

SELECT * FROM book;</pre>

  <p class="skewed">Результат:</p>
  <pre class="sqlResultTable">Affected rows: 2
Query result:
+---------+-----------------------+------------------+--------+--------+
| book_id | title                 | author           | price  | amount |
+---------+-----------------------+------------------+--------+--------+
| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |
| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 12     |
| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 13     |
| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |
| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |
+---------+-----------------------+------------------+--------+--------+</pre>

  <p>
    У результаті оновлено кількість двох книг: «Белая гвардия» (ціна збігається) та «Идиот» (ціна відрізняється).
    Для останньої потрібно оновити ще й ціну.
  </p>

  <h3>Завдання</h3>
  <p>
    Для всіх книг у таблиці <code>book</code>, які також є в <code>supply</code>, слід не лише оновити кількість,
    але й пересередити ціну. Ціна має дорівнювати середньому арифметичному з цін обох таблиць.
  </p>





  <div id="toggle1" style="cursor: pointer;">
    <div>
      <span class="arrow-text"><strong>Результат</strong></span>
    </div>
  </div>

  <div id="hiddenText1" style="display:none;">
    <pre class="sqlResultTable">Affected rows: 2
Query result:
+---------+-----------------------+------------------+--------+--------+
| book_id | title                 | author           | price  | amount |
+---------+-----------------------+------------------+--------+--------+
| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |
| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 12     |
| 3       | Идиот                 | Достоевский Ф.М. | 410.40 | 13     |
| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |
| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |
+---------+-----------------------+------------------+--------+--------+</pre>
  </div>

  <p></p>





  <div id="toggle2" style="cursor: pointer;">
    <div><span class="arrow-text"><strong>Пояснення</strong></span></div>
  </div>
  <div id="hiddenText2" style="display:none;">
    <p>Перераховувати ціну слід у будь-якому разі — навіть якщо вона збігається в обох таблицях. Це спрощує запит.</p>
  </div>






  <p></p>

  <div id="toggle3" style="cursor: pointer;">
    <div><span class="arrow-text"><strong>Структура та вміст таблиць <code>book</code> і
          <code>supply</code></strong></span></div>
  </div>
  <div id="hiddenText3" style="display:none;">
    <pre class="sqlResultTable">
+---------+-----------------------+------------------+--------+--------+
| book_id | title                 | author           | price  | amount |
+---------+-----------------------+------------------+--------+--------+
| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |
| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |
| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |
| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |
| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |
+---------+-----------------------+------------------+--------+--------+
</pre>
    <pre class="sqlResultTable">
+-----------+----------------+------------------+--------+--------+
| supply_id | title          | author           | price  | amount |
+-----------+----------------+------------------+--------+--------+
| 1         | Лирика         | Пастернак Б.Л.   | 518.99 | 2      |
| 2         | Черный человек | Есенин С.А.      | 570.20 | 6      |
| 3         | Белая гвардия  | Булгаков М.А.    | 540.50 | 7      |
| 4         | Идиот          | Достоевский Ф.М. | 360.80 | 3      |
+-----------+----------------+------------------+--------+--------+
</pre>
  </div>
</div>